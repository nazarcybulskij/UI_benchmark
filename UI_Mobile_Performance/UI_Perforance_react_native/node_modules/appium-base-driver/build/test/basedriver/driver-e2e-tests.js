"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _2 = require("../..");

var _protocol = require("../../lib/protocol/protocol");

var _requestPromise = _interopRequireDefault(require("request-promise"));

var _chai = _interopRequireDefault(require("chai"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _bluebird = _interopRequireDefault(require("bluebird"));

const should = _chai.default.should();

const DEFAULT_ARGS = {
  address: 'localhost',
  port: 8181
};

_chai.default.use(_chaiAsPromised.default);

function baseDriverE2ETests(DriverClass, defaultCaps = {}) {
  describe('BaseDriver (e2e)', function () {
    let baseServer,
        d = new DriverClass(DEFAULT_ARGS);
    before(async function () {
      baseServer = await (0, _2.server)({
        routeConfiguringFunction: (0, _2.routeConfiguringFunction)(d),
        port: DEFAULT_ARGS.port
      });
    });
    after(async function () {
      await baseServer.close();
    });

    function startSession(caps) {
      return (0, _requestPromise.default)({
        url: 'http://localhost:8181/wd/hub/session',
        method: 'POST',
        json: {
          desiredCapabilities: caps,
          requiredCapabilities: {}
        }
      });
    }

    function endSession(id) {
      return (0, _requestPromise.default)({
        url: `http://localhost:8181/wd/hub/session/${id}`,
        method: 'DELETE',
        json: true,
        simple: false
      });
    }

    function getSession(id) {
      return (0, _requestPromise.default)({
        url: `http://localhost:8181/wd/hub/session/${id}`,
        method: 'GET',
        json: true,
        simple: false
      });
    }

    describe('session handling', function () {
      it('should handle idempotency while creating sessions', async function () {
        const sessionIds = [];
        let times = 0;

        do {
          const res = await (0, _requestPromise.default)({
            url: 'http://localhost:8181/wd/hub/session',
            headers: {
              'X-Idempotency-Key': '123456'
            },
            method: 'POST',
            json: {
              desiredCapabilities: defaultCaps,
              requiredCapabilities: {}
            },
            simple: false,
            resolveWithFullResponse: true
          });
          sessionIds.push(res.body.sessionId);
          times++;
        } while (times < 2);

        _lodash.default.uniq(sessionIds).length.should.equal(1);

        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionIds[0]}`,
          method: 'DELETE',
          json: true,
          simple: false,
          resolveWithFullResponse: true
        });
        res.statusCode.should.equal(200);
        res.body.status.should.equal(0);
      });
      it('should handle idempotency while creating parallel sessions', async function () {
        const reqs = [];
        let times = 0;

        do {
          reqs.push((0, _requestPromise.default)({
            url: 'http://localhost:8181/wd/hub/session',
            headers: {
              'X-Idempotency-Key': '12345'
            },
            method: 'POST',
            json: {
              desiredCapabilities: defaultCaps,
              requiredCapabilities: {}
            },
            simple: false,
            resolveWithFullResponse: true
          }));
          times++;
        } while (times < 2);

        const sessionIds = (await _bluebird.default.all(reqs)).map(x => x.body.sessionId);

        _lodash.default.uniq(sessionIds).length.should.equal(1);

        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionIds[0]}`,
          method: 'DELETE',
          json: true,
          simple: false,
          resolveWithFullResponse: true
        });
        res.statusCode.should.equal(200);
        res.body.status.should.equal(0);
      });
      it('should create session and retrieve a session id, then delete it', async function () {
        let res = await (0, _requestPromise.default)({
          url: 'http://localhost:8181/wd/hub/session',
          method: 'POST',
          json: {
            desiredCapabilities: defaultCaps,
            requiredCapabilities: {}
          },
          simple: false,
          resolveWithFullResponse: true
        });
        res.statusCode.should.equal(200);
        res.body.status.should.equal(0);
        should.exist(res.body.sessionId);
        res.body.value.should.eql(defaultCaps);
        res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          method: 'DELETE',
          json: true,
          simple: false,
          resolveWithFullResponse: true
        });
        res.statusCode.should.equal(200);
        res.body.status.should.equal(0);
        should.equal(d.sessionId, null);
      });
    });
    it.skip('should throw NYI for commands not implemented', async function () {});
    describe('command timeouts', function () {
      let originalFindElement, originalFindElements;

      function startTimeoutSession(timeout) {
        let caps = _lodash.default.clone(defaultCaps);

        caps.newCommandTimeout = timeout;
        return startSession(caps);
      }

      before(function () {
        originalFindElement = d.findElement;

        d.findElement = function () {
          return 'foo';
        }.bind(d);

        originalFindElements = d.findElements;

        d.findElements = async function () {
          await _bluebird.default.delay(200);
          return ['foo'];
        }.bind(d);
      });
      after(function () {
        d.findElement = originalFindElement;
        d.findElements = originalFindElements;
      });
      it('should set a default commandTimeout', async function () {
        let newSession = await startTimeoutSession();
        d.newCommandTimeoutMs.should.be.above(0);
        await endSession(newSession.sessionId);
      });
      it('should timeout on commands using commandTimeout cap', async function () {
        let newSession = await startTimeoutSession(0.25);
        await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          json: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        let res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          method: 'GET',
          json: true,
          simple: false
        });
        res.status.should.equal(6);
        should.equal(d.sessionId, null);
        res = await endSession(newSession.sessionId);
        res.status.should.equal(6);
      });
      it('should not timeout with commandTimeout of false', async function () {
        let newSession = await startTimeoutSession(0.1);
        let start = Date.now();
        let res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/elements`,
          method: 'POST',
          json: {
            using: 'name',
            value: 'foo'
          }
        });
        (Date.now() - start).should.be.above(150);
        res.value.should.eql(['foo']);
        await endSession(newSession.sessionId);
      });
      it('should not timeout with commandTimeout of 0', async function () {
        d.newCommandTimeoutMs = 2;
        let newSession = await startTimeoutSession(0);
        await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          json: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        let res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          method: 'GET',
          json: true,
          simple: false
        });
        res.status.should.equal(0);
        res = await endSession(newSession.sessionId);
        res.status.should.equal(0);
        d.newCommandTimeoutMs = 60 * 1000;
      });
      it('should not timeout if its just the command taking awhile', async function () {
        let newSession = await startTimeoutSession(0.25);
        await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          json: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        let res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          method: 'GET',
          json: true,
          simple: false
        });
        res.status.should.equal(6);
        should.equal(d.sessionId, null);
        res = await endSession(newSession.sessionId);
        res.status.should.equal(6);
      });
      it('should not have a timer running before or after a session', async function () {
        should.not.exist(d.noCommandTimer);
        let newSession = await startTimeoutSession(0.25);
        newSession.sessionId.should.equal(d.sessionId);
        should.exist(d.noCommandTimer);
        await endSession(newSession.sessionId);
        should.not.exist(d.noCommandTimer);
      });
    });
    describe('settings api', function () {
      before(function () {
        d.settings = new _2.DeviceSettings({
          ignoreUnimportantViews: false
        });
      });
      it('should be able to get settings object', function () {
        d.settings.getSettings().ignoreUnimportantViews.should.be.false;
      });
      it('should throw error when updateSettings method is not defined', async function () {
        await d.settings.update({
          ignoreUnimportantViews: true
        }).should.eventually.be.rejectedWith('onSettingsUpdate');
      });
      it('should throw error for invalid update object', async function () {
        await d.settings.update('invalid json').should.eventually.be.rejectedWith('JSON');
      });
    });
    describe('unexpected exits', function () {
      it('should reject a current command when the driver crashes', async function () {
        d._oldGetStatus = d.getStatus;

        d.getStatus = async function () {
          await _bluebird.default.delay(5000);
        }.bind(d);

        let p = (0, _requestPromise.default)({
          url: 'http://localhost:8181/wd/hub/status',
          method: 'GET',
          json: true,
          simple: false
        });
        await _bluebird.default.delay(100);
        const shutdownEventPromise = new _bluebird.default((resolve, reject) => {
          setTimeout(() => reject(new Error('onUnexpectedShutdown event is expected to be fired within 5 seconds timeout')), 5000);
          d.onUnexpectedShutdown(resolve);
        });
        d.startUnexpectedShutdown(new Error('Crashytimes'));
        let res = await p;
        res.status.should.equal(13);
        res.value.message.should.contain('Crashytimes');
        await shutdownEventPromise;
        d.getStatus = d._oldGetStatus;
      });
    });
    describe('event timings', function () {
      it('should not add timings if not using opt-in cap', async function () {
        let session = await startSession(defaultCaps);
        let res = await getSession(session.sessionId);
        should.not.exist(res.events);
        await endSession(session.sessionId);
      });
      it('should add start session timings', async function () {
        let caps = Object.assign({}, defaultCaps, {
          eventTimings: true
        });
        let session = await startSession(caps);
        let res = (await getSession(session.sessionId)).value;
        should.exist(res.events);
        should.exist(res.events.newSessionRequested);
        should.exist(res.events.newSessionStarted);
        res.events.newSessionRequested[0].should.be.a('number');
        res.events.newSessionStarted[0].should.be.a('number');
        await endSession(session.sessionId);
      });
    });
    describe('execute driver script', function () {
      let originalFindElement, sessionId;
      before(function () {
        d.allowInsecure = ['execute_driver_script'];
        originalFindElement = d.findElement;

        d.findElement = function (strategy, selector) {
          if (strategy === 'accessibility id' && selector === 'amazing') {
            return {
              [_protocol.W3C_ELEMENT_KEY]: 'element-id-1'
            };
          }

          throw new _2.errors.NoSuchElementError('not found');
        }.bind(d);
      });
      beforeEach(async function () {
        ({
          sessionId
        } = await startSession(defaultCaps));
      });
      after(function () {
        d.findElement = originalFindElement;
      });
      afterEach(async function () {
        await endSession(sessionId);
      });
      it('should not work unless the allowInsecure feature flag is set', async function () {
        d._allowInsecure = d.allowInsecure;
        d.allowInsecure = [];
        const script = `return 'foo'`;
        await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script,
            type: 'wd'
          }
        }).should.eventually.be.rejectedWith(/allow-insecure/);
        await endSession(sessionId);
        d.allowInsecure = d._allowInsecure;
      });
      it('should execute a webdriverio script in the context of session', async function () {
        const script = `
          const timeouts = await driver.getTimeouts();
          const status = await driver.status();
          return [timeouts, status];
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script,
            type: 'webdriverio'
          }
        });
        const expectedTimeouts = {
          command: 250,
          implicit: 0
        };
        const expectedStatus = {};
        res.value.result.should.eql([expectedTimeouts, expectedStatus]);
      });
      it('should fail with any script type other than webdriverio currently', async function () {
        const script = `return 'foo'`;
        await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script,
            type: 'wd'
          }
        }).should.eventually.be.rejectedWith(/script type/);
      });
      it('should execute a webdriverio script that returns elements correctly', async function () {
        const script = `
          return await driver.$("~amazing");
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          }
        });
        res.value.result.should.eql({
          [_protocol.W3C_ELEMENT_KEY]: 'element-id-1',
          [_protocol.MJSONWP_ELEMENT_KEY]: 'element-id-1'
        });
      });
      it('should execute a webdriverio script that returns elements in deep structure', async function () {
        const script = `
          const el = await driver.$("~amazing");
          return {element: el, elements: [el, el]};
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          }
        });
        const elObj = {
          [_protocol.W3C_ELEMENT_KEY]: 'element-id-1',
          [_protocol.MJSONWP_ELEMENT_KEY]: 'element-id-1'
        };
        res.value.result.should.eql({
          element: elObj,
          elements: [elObj, elObj]
        });
      });
      it('should store and return logs to the user', async function () {
        const script = `
          console.log("foo");
          console.log("foo2");
          console.warn("bar");
          console.error("baz");
          return null;
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          }
        });
        res.value.logs.should.eql({
          log: ['foo', 'foo2'],
          warn: ['bar'],
          error: ['baz']
        });
      });
      it('should have appium specific commands available', async function () {
        const script = `
          return typeof driver.lock;
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          }
        });
        res.value.result.should.eql('function');
      });
      it('should correctly handle errors that happen in a webdriverio script', async function () {
        const script = `
          return await driver.$("~notfound");
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          },
          simple: false
        });
        res.should.eql({
          sessionId,
          status: 13,
          value: {
            message: 'An unknown server-side error occurred while processing the command. Original error: Could not execute driver script. Original error was: Error: not found'
          }
        });
      });
      it('should correctly handle errors that happen when a script cannot be compiled', async function () {
        const script = `
          return {;
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script
          },
          simple: false
        });
        res.sessionId.should.eql(sessionId);
        res.status.should.eql(13);
        res.value.should.have.property('message');
        res.value.message.should.match(/An unknown server-side error occurred while processing the command. Original error: Could not execute driver script. Original error was: Error: Unexpected token '?;'?/);
      });
      it('should be able to set a timeout on a driver script', async function () {
        const script = `
          await Promise.delay(1000);
          return true;
        `;
        const res = await (0, _requestPromise.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          json: {
            script,
            timeout: 50
          },
          simple: false
        });
        res.value.message.should.match(/.+50.+timeout.+/);
      });
    });
  });
}

var _default = baseDriverE2ETests;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYmFzZWRyaXZlci9kcml2ZXItZTJlLXRlc3RzLmpzIl0sIm5hbWVzIjpbInNob3VsZCIsImNoYWkiLCJERUZBVUxUX0FSR1MiLCJhZGRyZXNzIiwicG9ydCIsInVzZSIsImNoYWlBc1Byb21pc2VkIiwiYmFzZURyaXZlckUyRVRlc3RzIiwiRHJpdmVyQ2xhc3MiLCJkZWZhdWx0Q2FwcyIsImRlc2NyaWJlIiwiYmFzZVNlcnZlciIsImQiLCJiZWZvcmUiLCJyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24iLCJhZnRlciIsImNsb3NlIiwic3RhcnRTZXNzaW9uIiwiY2FwcyIsInVybCIsIm1ldGhvZCIsImpzb24iLCJkZXNpcmVkQ2FwYWJpbGl0aWVzIiwicmVxdWlyZWRDYXBhYmlsaXRpZXMiLCJlbmRTZXNzaW9uIiwiaWQiLCJzaW1wbGUiLCJnZXRTZXNzaW9uIiwiaXQiLCJzZXNzaW9uSWRzIiwidGltZXMiLCJyZXMiLCJoZWFkZXJzIiwicmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2UiLCJwdXNoIiwiYm9keSIsInNlc3Npb25JZCIsIl8iLCJ1bmlxIiwibGVuZ3RoIiwiZXF1YWwiLCJzdGF0dXNDb2RlIiwic3RhdHVzIiwicmVxcyIsIkIiLCJhbGwiLCJtYXAiLCJ4IiwiZXhpc3QiLCJ2YWx1ZSIsImVxbCIsInNraXAiLCJvcmlnaW5hbEZpbmRFbGVtZW50Iiwib3JpZ2luYWxGaW5kRWxlbWVudHMiLCJzdGFydFRpbWVvdXRTZXNzaW9uIiwidGltZW91dCIsImNsb25lIiwibmV3Q29tbWFuZFRpbWVvdXQiLCJmaW5kRWxlbWVudCIsImJpbmQiLCJmaW5kRWxlbWVudHMiLCJkZWxheSIsIm5ld1Nlc3Npb24iLCJuZXdDb21tYW5kVGltZW91dE1zIiwiYmUiLCJhYm92ZSIsInVzaW5nIiwic3RhcnQiLCJEYXRlIiwibm93Iiwibm90Iiwibm9Db21tYW5kVGltZXIiLCJzZXR0aW5ncyIsIkRldmljZVNldHRpbmdzIiwiaWdub3JlVW5pbXBvcnRhbnRWaWV3cyIsImdldFNldHRpbmdzIiwiZmFsc2UiLCJ1cGRhdGUiLCJldmVudHVhbGx5IiwicmVqZWN0ZWRXaXRoIiwiX29sZEdldFN0YXR1cyIsImdldFN0YXR1cyIsInAiLCJzaHV0ZG93bkV2ZW50UHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJvblVuZXhwZWN0ZWRTaHV0ZG93biIsInN0YXJ0VW5leHBlY3RlZFNodXRkb3duIiwibWVzc2FnZSIsImNvbnRhaW4iLCJzZXNzaW9uIiwiZXZlbnRzIiwiT2JqZWN0IiwiYXNzaWduIiwiZXZlbnRUaW1pbmdzIiwibmV3U2Vzc2lvblJlcXVlc3RlZCIsIm5ld1Nlc3Npb25TdGFydGVkIiwiYSIsImFsbG93SW5zZWN1cmUiLCJzdHJhdGVneSIsInNlbGVjdG9yIiwiVzNDX0VMRU1FTlRfS0VZIiwiZXJyb3JzIiwiTm9TdWNoRWxlbWVudEVycm9yIiwiYmVmb3JlRWFjaCIsImFmdGVyRWFjaCIsIl9hbGxvd0luc2VjdXJlIiwic2NyaXB0IiwidHlwZSIsImV4cGVjdGVkVGltZW91dHMiLCJjb21tYW5kIiwiaW1wbGljaXQiLCJleHBlY3RlZFN0YXR1cyIsInJlc3VsdCIsIk1KU09OV1BfRUxFTUVOVF9LRVkiLCJlbE9iaiIsImVsZW1lbnQiLCJlbGVtZW50cyIsImxvZ3MiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJoYXZlIiwicHJvcGVydHkiLCJtYXRjaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGNBQUtELE1BQUwsRUFBZjs7QUFDQSxNQUFNRSxZQUFZLEdBQUc7QUFDbkJDLEVBQUFBLE9BQU8sRUFBRSxXQURVO0FBRW5CQyxFQUFBQSxJQUFJLEVBQUU7QUFGYSxDQUFyQjs7QUFJQUgsY0FBS0ksR0FBTCxDQUFTQyx1QkFBVDs7QUFFQSxTQUFTQyxrQkFBVCxDQUE2QkMsV0FBN0IsRUFBMENDLFdBQVcs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Q3pFLGNBQU1pRixNQUFNLEdBQUk7OztTQUFoQjtBQUlBLGNBQU05RSxHQUFHLEdBQUcsTUFBTSw2QkFBUTtBQUN4QlosVUFBQUEsR0FBRyxFQUFHLHdDQUF1Q2lCLFNBQVUsd0JBRC9CO0FBRXhCaEIsVUFBQUEsTUFBTSxFQUFFLE1BRmdCO0FBR3hCQyxVQUFBQSxJQUFJLEVBQUU7QUFBQ3dGLFlBQUFBLE1BQUQ7QUFBU3RELFlBQUFBLE9BQU8sRUFBRTtBQUFsQixXQUhrQjtBQUl4QjdCLFVBQUFBLE1BQU0sRUFBRTtBQUpnQixTQUFSLENBQWxCO0FBTUFLLFFBQUFBLEdBQUcsQ0FBQ2tCLEtBQUosQ0FBVXlDLE9BQVYsQ0FBa0IxRixNQUFsQixDQUF5QjhILEtBQXpCLENBQStCLGlCQUEvQjtBQUNELE9BWkMsQ0FBRjtBQWFELEtBNUtPLENBQVI7QUE2S0QsR0F6ZU8sQ0FBUjtBQTBlRDs7ZUFFY3ZILGtCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHNlcnZlciwgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uLCBEZXZpY2VTZXR0aW5ncywgZXJyb3JzIH0gZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHsgVzNDX0VMRU1FTlRfS0VZLCBNSlNPTldQX0VMRU1FTlRfS0VZIH0gZnJvbSAnLi4vLi4vbGliL3Byb3RvY29sL3Byb3RvY29sJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3JlcXVlc3QtcHJvbWlzZSc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcblxuY29uc3Qgc2hvdWxkID0gY2hhaS5zaG91bGQoKTtcbmNvbnN0IERFRkFVTFRfQVJHUyA9IHtcbiAgYWRkcmVzczogJ2xvY2FsaG9zdCcsXG4gIHBvcnQ6IDgxODFcbn07XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmZ1bmN0aW9uIGJhc2VEcml2ZXJFMkVUZXN0cyAoRHJpdmVyQ2xhc3MsIGRlZmF1bHRDYXBzID0ge30pIHtcbiAgZGVzY3JpYmUoJ0Jhc2VEcml2ZXIgKGUyZSknLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGJhc2VTZXJ2ZXIsIGQgPSBuZXcgRHJpdmVyQ2xhc3MoREVGQVVMVF9BUkdTKTtcbiAgICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYmFzZVNlcnZlciA9IGF3YWl0IHNlcnZlcih7XG4gICAgICAgIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbjogcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGQpLFxuICAgICAgICBwb3J0OiBERUZBVUxUX0FSR1MucG9ydCxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGFmdGVyKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGJhc2VTZXJ2ZXIuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHN0YXJ0U2Vzc2lvbiAoY2Fwcykge1xuICAgICAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24nLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IGNhcHMsIHJlcXVpcmVkQ2FwYWJpbGl0aWVzOiB7fX0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmRTZXNzaW9uIChpZCkge1xuICAgICAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtpZH1gLFxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZXNzaW9uIChpZCkge1xuICAgICAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtpZH1gLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkZXNjcmliZSgnc2Vzc2lvbiBoYW5kbGluZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGlkZW1wb3RlbmN5IHdoaWxlIGNyZWF0aW5nIHNlc3Npb25zJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzZXNzaW9uSWRzID0gW107XG4gICAgICAgIGxldCB0aW1lcyA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdYLUlkZW1wb3RlbmN5LUtleSc6ICcxMjM0NTYnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IGRlZmF1bHRDYXBzLCByZXF1aXJlZENhcGFiaWxpdGllczoge319LFxuICAgICAgICAgICAgc2ltcGxlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzZXNzaW9uSWRzLnB1c2gocmVzLmJvZHkuc2Vzc2lvbklkKTtcbiAgICAgICAgICB0aW1lcysrO1xuICAgICAgICB9IHdoaWxlICh0aW1lcyA8IDIpO1xuICAgICAgICBfLnVuaXEoc2Vzc2lvbklkcykubGVuZ3RoLnNob3VsZC5lcXVhbCgxKTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWRzWzBdfWAsXG4gICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgIHNpbXBsZTogZmFsc2UsXG4gICAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGlkZW1wb3RlbmN5IHdoaWxlIGNyZWF0aW5nIHBhcmFsbGVsIHNlc3Npb25zJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCByZXFzID0gW107XG4gICAgICAgIGxldCB0aW1lcyA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICByZXFzLnB1c2gocmVxdWVzdCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnWC1JZGVtcG90ZW5jeS1LZXknOiAnMTIzNDUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IGRlZmF1bHRDYXBzLCByZXF1aXJlZENhcGFiaWxpdGllczoge319LFxuICAgICAgICAgICAgc2ltcGxlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHRpbWVzKys7XG4gICAgICAgIH0gd2hpbGUgKHRpbWVzIDwgMik7XG4gICAgICAgIGNvbnN0IHNlc3Npb25JZHMgPSAoYXdhaXQgQi5hbGwocmVxcykpLm1hcCgoeCkgPT4geC5ib2R5LnNlc3Npb25JZCk7XG4gICAgICAgIF8udW5pcShzZXNzaW9uSWRzKS5sZW5ndGguc2hvdWxkLmVxdWFsKDEpO1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZHNbMF19YCxcbiAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgc2ltcGxlOiBmYWxzZSxcbiAgICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICAgIHJlcy5ib2R5LnN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgc2Vzc2lvbiBhbmQgcmV0cmlldmUgYSBzZXNzaW9uIGlkLCB0aGVuIGRlbGV0ZSBpdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbicsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IGRlZmF1bHRDYXBzLCByZXF1aXJlZENhcGFiaWxpdGllczoge319LFxuICAgICAgICAgIHNpbXBsZTogZmFsc2UsXG4gICAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICAgIHJlcy5ib2R5LnN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG4gICAgICAgIHNob3VsZC5leGlzdChyZXMuYm9keS5zZXNzaW9uSWQpO1xuICAgICAgICByZXMuYm9keS52YWx1ZS5zaG91bGQuZXFsKGRlZmF1bHRDYXBzKTtcblxuICAgICAgICByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH1gLFxuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICBzaW1wbGU6IGZhbHNlLFxuICAgICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICBzaG91bGQuZXF1YWwoZC5zZXNzaW9uSWQsIG51bGwpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgdGhyb3cgTllJIGZvciBjb21tYW5kcyBub3QgaW1wbGVtZW50ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY29tbWFuZCB0aW1lb3V0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBvcmlnaW5hbEZpbmRFbGVtZW50LCBvcmlnaW5hbEZpbmRFbGVtZW50cztcbiAgICAgIGZ1bmN0aW9uIHN0YXJ0VGltZW91dFNlc3Npb24gKHRpbWVvdXQpIHtcbiAgICAgICAgbGV0IGNhcHMgPSBfLmNsb25lKGRlZmF1bHRDYXBzKTtcbiAgICAgICAgY2Fwcy5uZXdDb21tYW5kVGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzdGFydFNlc3Npb24oY2Fwcyk7XG4gICAgICB9XG5cbiAgICAgIGJlZm9yZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9yaWdpbmFsRmluZEVsZW1lbnQgPSBkLmZpbmRFbGVtZW50O1xuICAgICAgICBkLmZpbmRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnZm9vJztcbiAgICAgICAgfS5iaW5kKGQpO1xuXG4gICAgICAgIG9yaWdpbmFsRmluZEVsZW1lbnRzID0gZC5maW5kRWxlbWVudHM7XG4gICAgICAgIGQuZmluZEVsZW1lbnRzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGF3YWl0IEIuZGVsYXkoMjAwKTtcbiAgICAgICAgICByZXR1cm4gWydmb28nXTtcbiAgICAgICAgfS5iaW5kKGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZC5maW5kRWxlbWVudCA9IG9yaWdpbmFsRmluZEVsZW1lbnQ7XG4gICAgICAgIGQuZmluZEVsZW1lbnRzID0gb3JpZ2luYWxGaW5kRWxlbWVudHM7XG4gICAgICB9KTtcblxuXG4gICAgICBpdCgnc2hvdWxkIHNldCBhIGRlZmF1bHQgY29tbWFuZFRpbWVvdXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBuZXdTZXNzaW9uID0gYXdhaXQgc3RhcnRUaW1lb3V0U2Vzc2lvbigpO1xuICAgICAgICBkLm5ld0NvbW1hbmRUaW1lb3V0TXMuc2hvdWxkLmJlLmFib3ZlKDApO1xuICAgICAgICBhd2FpdCBlbmRTZXNzaW9uKG5ld1Nlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRpbWVvdXQgb24gY29tbWFuZHMgdXNpbmcgY29tbWFuZFRpbWVvdXQgY2FwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgbmV3U2Vzc2lvbiA9IGF3YWl0IHN0YXJ0VGltZW91dFNlc3Npb24oMC4yNSk7XG5cbiAgICAgICAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9L2VsZW1lbnRgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHt1c2luZzogJ25hbWUnLCB2YWx1ZTogJ2Zvbyd9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSg0MDApO1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9YCxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cy5zaG91bGQuZXF1YWwoNik7XG4gICAgICAgIHNob3VsZC5lcXVhbChkLnNlc3Npb25JZCwgbnVsbCk7XG4gICAgICAgIHJlcyA9IGF3YWl0IGVuZFNlc3Npb24obmV3U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCg2KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0aW1lb3V0IHdpdGggY29tbWFuZFRpbWVvdXQgb2YgZmFsc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBuZXdTZXNzaW9uID0gYXdhaXQgc3RhcnRUaW1lb3V0U2Vzc2lvbigwLjEpO1xuICAgICAgICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9L2VsZW1lbnRzYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7dXNpbmc6ICduYW1lJywgdmFsdWU6ICdmb28nfSxcbiAgICAgICAgfSk7XG4gICAgICAgIChEYXRlLm5vdygpIC0gc3RhcnQpLnNob3VsZC5iZS5hYm92ZSgxNTApO1xuICAgICAgICByZXMudmFsdWUuc2hvdWxkLmVxbChbJ2ZvbyddKTtcbiAgICAgICAgYXdhaXQgZW5kU2Vzc2lvbihuZXdTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdGltZW91dCB3aXRoIGNvbW1hbmRUaW1lb3V0IG9mIDAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQubmV3Q29tbWFuZFRpbWVvdXRNcyA9IDI7XG4gICAgICAgIGxldCBuZXdTZXNzaW9uID0gYXdhaXQgc3RhcnRUaW1lb3V0U2Vzc2lvbigwKTtcblxuICAgICAgICBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH0vZWxlbWVudGAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3VzaW5nOiAnbmFtZScsIHZhbHVlOiAnZm9vJ30sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBCLmRlbGF5KDQwMCk7XG4gICAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH1gLFxuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgICAgcmVzID0gYXdhaXQgZW5kU2Vzc2lvbihuZXdTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuXG4gICAgICAgIGQubmV3Q29tbWFuZFRpbWVvdXRNcyA9IDYwICogMTAwMDtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0aW1lb3V0IGlmIGl0cyBqdXN0IHRoZSBjb21tYW5kIHRha2luZyBhd2hpbGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBuZXdTZXNzaW9uID0gYXdhaXQgc3RhcnRUaW1lb3V0U2Vzc2lvbigwLjI1KTtcbiAgICAgICAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9L2VsZW1lbnRgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHt1c2luZzogJ25hbWUnLCB2YWx1ZTogJ2Zvbyd9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSg0MDApO1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9YCxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cy5zaG91bGQuZXF1YWwoNik7XG4gICAgICAgIHNob3VsZC5lcXVhbChkLnNlc3Npb25JZCwgbnVsbCk7XG4gICAgICAgIHJlcyA9IGF3YWl0IGVuZFNlc3Npb24obmV3U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCg2KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBoYXZlIGEgdGltZXIgcnVubmluZyBiZWZvcmUgb3IgYWZ0ZXIgYSBzZXNzaW9uJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBzaG91bGQubm90LmV4aXN0KGQubm9Db21tYW5kVGltZXIpO1xuICAgICAgICBsZXQgbmV3U2Vzc2lvbiA9IGF3YWl0IHN0YXJ0VGltZW91dFNlc3Npb24oMC4yNSk7XG4gICAgICAgIG5ld1Nlc3Npb24uc2Vzc2lvbklkLnNob3VsZC5lcXVhbChkLnNlc3Npb25JZCk7XG4gICAgICAgIHNob3VsZC5leGlzdChkLm5vQ29tbWFuZFRpbWVyKTtcbiAgICAgICAgYXdhaXQgZW5kU2Vzc2lvbihuZXdTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHNob3VsZC5ub3QuZXhpc3QoZC5ub0NvbW1hbmRUaW1lcik7XG4gICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3NldHRpbmdzIGFwaScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJlZm9yZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQuc2V0dGluZ3MgPSBuZXcgRGV2aWNlU2V0dGluZ3Moe2lnbm9yZVVuaW1wb3J0YW50Vmlld3M6IGZhbHNlfSk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBnZXQgc2V0dGluZ3Mgb2JqZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBkLnNldHRpbmdzLmdldFNldHRpbmdzKCkuaWdub3JlVW5pbXBvcnRhbnRWaWV3cy5zaG91bGQuYmUuZmFsc2U7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiB1cGRhdGVTZXR0aW5ncyBtZXRob2QgaXMgbm90IGRlZmluZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF3YWl0IGQuc2V0dGluZ3MudXBkYXRlKHtpZ25vcmVVbmltcG9ydGFudFZpZXdzOiB0cnVlfSkuc2hvdWxkLmV2ZW50dWFsbHlcbiAgICAgICAgICAgICAgICAuYmUucmVqZWN0ZWRXaXRoKCdvblNldHRpbmdzVXBkYXRlJyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIGludmFsaWQgdXBkYXRlIG9iamVjdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXdhaXQgZC5zZXR0aW5ncy51cGRhdGUoJ2ludmFsaWQganNvbicpLnNob3VsZC5ldmVudHVhbGx5XG4gICAgICAgICAgICAgICAgLmJlLnJlamVjdGVkV2l0aCgnSlNPTicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgndW5leHBlY3RlZCBleGl0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGEgY3VycmVudCBjb21tYW5kIHdoZW4gdGhlIGRyaXZlciBjcmFzaGVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBkLl9vbGRHZXRTdGF0dXMgPSBkLmdldFN0YXR1cztcbiAgICAgICAgZC5nZXRTdGF0dXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYXdhaXQgQi5kZWxheSg1MDAwKTtcbiAgICAgICAgfS5iaW5kKGQpO1xuICAgICAgICBsZXQgcCA9IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc3RhdHVzJyxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIHJlcXVlc3QgZ2V0cyB0byB0aGUgc2VydmVyIGJlZm9yZSBvdXIgc2h1dGRvd25cbiAgICAgICAgYXdhaXQgQi5kZWxheSgxMDApO1xuICAgICAgICBjb25zdCBzaHV0ZG93bkV2ZW50UHJvbWlzZSA9IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ29uVW5leHBlY3RlZFNodXRkb3duIGV2ZW50IGlzIGV4cGVjdGVkIHRvIGJlIGZpcmVkIHdpdGhpbiA1IHNlY29uZHMgdGltZW91dCcpKSwgNTAwMCk7XG4gICAgICAgICAgZC5vblVuZXhwZWN0ZWRTaHV0ZG93bihyZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGQuc3RhcnRVbmV4cGVjdGVkU2h1dGRvd24obmV3IEVycm9yKCdDcmFzaHl0aW1lcycpKTtcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHA7XG4gICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDEzKTtcbiAgICAgICAgcmVzLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmNvbnRhaW4oJ0NyYXNoeXRpbWVzJyk7XG4gICAgICAgIGF3YWl0IHNodXRkb3duRXZlbnRQcm9taXNlO1xuICAgICAgICBkLmdldFN0YXR1cyA9IGQuX29sZEdldFN0YXR1cztcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2V2ZW50IHRpbWluZ3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnc2hvdWxkIG5vdCBhZGQgdGltaW5ncyBpZiBub3QgdXNpbmcgb3B0LWluIGNhcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHNlc3Npb24gPSBhd2FpdCBzdGFydFNlc3Npb24oZGVmYXVsdENhcHMpO1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgZ2V0U2Vzc2lvbihzZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHNob3VsZC5ub3QuZXhpc3QocmVzLmV2ZW50cyk7XG4gICAgICAgIGF3YWl0IGVuZFNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGFkZCBzdGFydCBzZXNzaW9uIHRpbWluZ3MnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBjYXBzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENhcHMsIHtldmVudFRpbWluZ3M6IHRydWV9KTtcbiAgICAgICAgbGV0IHNlc3Npb24gPSBhd2FpdCBzdGFydFNlc3Npb24oY2Fwcyk7XG4gICAgICAgIGxldCByZXMgPSAoYXdhaXQgZ2V0U2Vzc2lvbihzZXNzaW9uLnNlc3Npb25JZCkpLnZhbHVlO1xuICAgICAgICBzaG91bGQuZXhpc3QocmVzLmV2ZW50cyk7XG4gICAgICAgIHNob3VsZC5leGlzdChyZXMuZXZlbnRzLm5ld1Nlc3Npb25SZXF1ZXN0ZWQpO1xuICAgICAgICBzaG91bGQuZXhpc3QocmVzLmV2ZW50cy5uZXdTZXNzaW9uU3RhcnRlZCk7XG4gICAgICAgIHJlcy5ldmVudHMubmV3U2Vzc2lvblJlcXVlc3RlZFswXS5zaG91bGQuYmUuYSgnbnVtYmVyJyk7XG4gICAgICAgIHJlcy5ldmVudHMubmV3U2Vzc2lvblN0YXJ0ZWRbMF0uc2hvdWxkLmJlLmEoJ251bWJlcicpO1xuICAgICAgICBhd2FpdCBlbmRTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2V4ZWN1dGUgZHJpdmVyIHNjcmlwdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG1vY2sgc29tZSBtZXRob2RzIG9uIEJhc2VEcml2ZXIgdGhhdCBhcmVuJ3Qgbm9ybWFsbHkgdGhlcmUgZXhjZXB0IGluXG4gICAgICAvLyBhIGZ1bGx5IGJsb3duIGRyaXZlclxuICAgICAgbGV0IG9yaWdpbmFsRmluZEVsZW1lbnQsIHNlc3Npb25JZDtcbiAgICAgIGJlZm9yZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQuYWxsb3dJbnNlY3VyZSA9IFsnZXhlY3V0ZV9kcml2ZXJfc2NyaXB0J107XG4gICAgICAgIG9yaWdpbmFsRmluZEVsZW1lbnQgPSBkLmZpbmRFbGVtZW50O1xuICAgICAgICBkLmZpbmRFbGVtZW50ID0gKGZ1bmN0aW9uIChzdHJhdGVneSwgc2VsZWN0b3IpIHtcbiAgICAgICAgICBpZiAoc3RyYXRlZ3kgPT09ICdhY2Nlc3NpYmlsaXR5IGlkJyAmJiBzZWxlY3RvciA9PT0gJ2FtYXppbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1tXM0NfRUxFTUVOVF9LRVldOiAnZWxlbWVudC1pZC0xJ307XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5Ob1N1Y2hFbGVtZW50RXJyb3IoJ25vdCBmb3VuZCcpO1xuICAgICAgICB9KS5iaW5kKGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAoe3Nlc3Npb25JZH0gPSBhd2FpdCBzdGFydFNlc3Npb24oZGVmYXVsdENhcHMpKTtcbiAgICAgIH0pO1xuXG4gICAgICBhZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQuZmluZEVsZW1lbnQgPSBvcmlnaW5hbEZpbmRFbGVtZW50O1xuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF3YWl0IGVuZFNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB3b3JrIHVubGVzcyB0aGUgYWxsb3dJbnNlY3VyZSBmZWF0dXJlIGZsYWcgaXMgc2V0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBkLl9hbGxvd0luc2VjdXJlID0gZC5hbGxvd0luc2VjdXJlO1xuICAgICAgICBkLmFsbG93SW5zZWN1cmUgPSBbXTtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYHJldHVybiAnZm9vJ2A7XG4gICAgICAgIGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZH0vYXBwaXVtL2V4ZWN1dGVfZHJpdmVyYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7c2NyaXB0LCB0eXBlOiAnd2QnfSxcbiAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9hbGxvdy1pbnNlY3VyZS8pO1xuICAgICAgICBhd2FpdCBlbmRTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICAgIGQuYWxsb3dJbnNlY3VyZSA9IGQuX2FsbG93SW5zZWN1cmU7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIGEgd2ViZHJpdmVyaW8gc2NyaXB0IGluIHRoZSBjb250ZXh0IG9mIHNlc3Npb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGBcbiAgICAgICAgICBjb25zdCB0aW1lb3V0cyA9IGF3YWl0IGRyaXZlci5nZXRUaW1lb3V0cygpO1xuICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRyaXZlci5zdGF0dXMoKTtcbiAgICAgICAgICByZXR1cm4gW3RpbWVvdXRzLCBzdGF0dXNdO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3NjcmlwdCwgdHlwZTogJ3dlYmRyaXZlcmlvJ30sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBleHBlY3RlZFRpbWVvdXRzID0ge2NvbW1hbmQ6IDI1MCwgaW1wbGljaXQ6IDB9O1xuICAgICAgICBjb25zdCBleHBlY3RlZFN0YXR1cyA9IHt9O1xuICAgICAgICByZXMudmFsdWUucmVzdWx0LnNob3VsZC5lcWwoW2V4cGVjdGVkVGltZW91dHMsIGV4cGVjdGVkU3RhdHVzXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmYWlsIHdpdGggYW55IHNjcmlwdCB0eXBlIG90aGVyIHRoYW4gd2ViZHJpdmVyaW8gY3VycmVudGx5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgcmV0dXJuICdmb28nYDtcbiAgICAgICAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHtzY3JpcHQsIHR5cGU6ICd3ZCd9LFxuICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL3NjcmlwdCB0eXBlLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIGEgd2ViZHJpdmVyaW8gc2NyaXB0IHRoYXQgcmV0dXJucyBlbGVtZW50cyBjb3JyZWN0bHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGBcbiAgICAgICAgICByZXR1cm4gYXdhaXQgZHJpdmVyLiQoXCJ+YW1hemluZ1wiKTtcbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHtzY3JpcHR9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnZhbHVlLnJlc3VsdC5zaG91bGQuZXFsKHtcbiAgICAgICAgICBbVzNDX0VMRU1FTlRfS0VZXTogJ2VsZW1lbnQtaWQtMScsXG4gICAgICAgICAgW01KU09OV1BfRUxFTUVOVF9LRVldOiAnZWxlbWVudC1pZC0xJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgYSB3ZWJkcml2ZXJpbyBzY3JpcHQgdGhhdCByZXR1cm5zIGVsZW1lbnRzIGluIGRlZXAgc3RydWN0dXJlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgY29uc3QgZWwgPSBhd2FpdCBkcml2ZXIuJChcIn5hbWF6aW5nXCIpO1xuICAgICAgICAgIHJldHVybiB7ZWxlbWVudDogZWwsIGVsZW1lbnRzOiBbZWwsIGVsXX07XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZH0vYXBwaXVtL2V4ZWN1dGVfZHJpdmVyYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7c2NyaXB0fSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGVsT2JqID0ge1xuICAgICAgICAgIFtXM0NfRUxFTUVOVF9LRVldOiAnZWxlbWVudC1pZC0xJyxcbiAgICAgICAgICBbTUpTT05XUF9FTEVNRU5UX0tFWV06ICdlbGVtZW50LWlkLTEnXG4gICAgICAgIH07XG4gICAgICAgIHJlcy52YWx1ZS5yZXN1bHQuc2hvdWxkLmVxbCh7ZWxlbWVudDogZWxPYmosIGVsZW1lbnRzOiBbZWxPYmosIGVsT2JqXX0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3RvcmUgYW5kIHJldHVybiBsb2dzIHRvIHRoZSB1c2VyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgY29uc29sZS5sb2coXCJmb29cIik7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJmb28yXCIpO1xuICAgICAgICAgIGNvbnNvbGUud2FybihcImJhclwiKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYmF6XCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3NjcmlwdH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMudmFsdWUubG9ncy5zaG91bGQuZXFsKHtsb2c6IFsnZm9vJywgJ2ZvbzInXSwgd2FybjogWydiYXInXSwgZXJyb3I6IFsnYmF6J119KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgYXBwaXVtIHNwZWNpZmljIGNvbW1hbmRzIGF2YWlsYWJsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYFxuICAgICAgICAgIHJldHVybiB0eXBlb2YgZHJpdmVyLmxvY2s7XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZH0vYXBwaXVtL2V4ZWN1dGVfZHJpdmVyYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7c2NyaXB0fSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy52YWx1ZS5yZXN1bHQuc2hvdWxkLmVxbCgnZnVuY3Rpb24nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvcnJlY3RseSBoYW5kbGUgZXJyb3JzIHRoYXQgaGFwcGVuIGluIGEgd2ViZHJpdmVyaW8gc2NyaXB0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGRyaXZlci4kKFwifm5vdGZvdW5kXCIpO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3NjcmlwdH0sXG4gICAgICAgICAgc2ltcGxlOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zaG91bGQuZXFsKHtcbiAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgc3RhdHVzOiAxMyxcbiAgICAgICAgICB2YWx1ZToge21lc3NhZ2U6ICdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIGNvbW1hbmQuIE9yaWdpbmFsIGVycm9yOiBDb3VsZCBub3QgZXhlY3V0ZSBkcml2ZXIgc2NyaXB0LiBPcmlnaW5hbCBlcnJvciB3YXM6IEVycm9yOiBub3QgZm91bmQnfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvcnJlY3RseSBoYW5kbGUgZXJyb3JzIHRoYXQgaGFwcGVuIHdoZW4gYSBzY3JpcHQgY2Fubm90IGJlIGNvbXBpbGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgcmV0dXJuIHs7XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZH0vYXBwaXVtL2V4ZWN1dGVfZHJpdmVyYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7c2NyaXB0fSxcbiAgICAgICAgICBzaW1wbGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnNlc3Npb25JZC5zaG91bGQuZXFsKHNlc3Npb25JZCk7XG4gICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxbCgxMyk7XG4gICAgICAgIHJlcy52YWx1ZS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScpO1xuICAgICAgICByZXMudmFsdWUubWVzc2FnZS5zaG91bGQubWF0Y2goL0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgY29tbWFuZC4gT3JpZ2luYWwgZXJyb3I6IENvdWxkIG5vdCBleGVjdXRlIGRyaXZlciBzY3JpcHQuIE9yaWdpbmFsIGVycm9yIHdhczogRXJyb3I6IFVuZXhwZWN0ZWQgdG9rZW4gJz87Jz8vKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gc2V0IGEgdGltZW91dCBvbiBhIGRyaXZlciBzY3JpcHQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGBcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmRlbGF5KDEwMDApO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3NjcmlwdCwgdGltZW91dDogNTB9LFxuICAgICAgICAgIHNpbXBsZTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZXMudmFsdWUubWVzc2FnZS5zaG91bGQubWF0Y2goLy4rNTAuK3RpbWVvdXQuKy8pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBiYXNlRHJpdmVyRTJFVGVzdHM7XG4iXSwiZmlsZSI6InRlc3QvYmFzZWRyaXZlci9kcml2ZXItZTJlLXRlc3RzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
