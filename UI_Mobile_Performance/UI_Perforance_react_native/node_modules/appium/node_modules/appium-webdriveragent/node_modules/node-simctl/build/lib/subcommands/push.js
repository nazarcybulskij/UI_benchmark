"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _appiumSupport = require("appium-support");

var _path = _interopRequireDefault(require("path"));

const commands = {};

commands.pushNotification = async function pushNotification(payload) {
  const tmpRoot = await _appiumSupport.tempDir.openDir();

  try {
    const dstPath = _path.default.resolve(tmpRoot, 'apns.json');

    await _appiumSupport.fs.writeFile(dstPath, JSON.stringify(payload), 'utf8');
    await this.exec('push', {
      args: [this.requireUdid('push'), dstPath]
    });
  } finally {
    await _appiumSupport.fs.rimraf(tmpRoot);
  }
};

var _default = commands;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zdWJjb21tYW5kcy9wdXNoLmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwicHVzaE5vdGlmaWNhdGlvbiIsInBheWxvYWQiLCJ0bXBSb290IiwidGVtcERpciIsIm9wZW5EaXIiLCJkc3RQYXRoIiwicGF0aCIsInJlc29sdmUiLCJmcyIsIndyaXRlRmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJleGVjIiwiYXJncyIsInJlcXVpcmVVZGlkIiwicmltcmFmIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBLE1BQU1BLFFBQVEsR0FBRyxFQUFqQjs7QUFzQkFBLFFBQVEsQ0FBQ0MsZ0JBQVQsR0FBNEIsZUFBZUEsZ0JBQWYsQ0FBaUNDLE9BQWpDLEVBQTBDO0FBQ3BFLFFBQU1DLE9BQU8sR0FBRyxNQUFNQyx1QkFBUUMsT0FBUixFQUF0Qjs7QUFDQSxNQUFJO0FBQ0YsVUFBTUMsT0FBTyxHQUFHQyxjQUFLQyxPQUFMLENBQWFMLE9BQWIsRUFBc0IsV0FBdEIsQ0FBaEI7O0FBQ0EsVUFBTU0sa0JBQUdDLFNBQUgsQ0FBYUosT0FBYixFQUFzQkssSUFBSSxDQUFDQyxTQUFMLENBQWVWLE9BQWYsQ0FBdEIsRUFBK0MsTUFBL0MsQ0FBTjtBQUNBLFVBQU0sS0FBS1csSUFBTCxDQUFVLE1BQVYsRUFBa0I7QUFDdEJDLE1BQUFBLElBQUksRUFBRSxDQUFDLEtBQUtDLFdBQUwsQ0FBaUIsTUFBakIsQ0FBRCxFQUEyQlQsT0FBM0I7QUFEZ0IsS0FBbEIsQ0FBTjtBQUdELEdBTkQsU0FNVTtBQUNSLFVBQU1HLGtCQUFHTyxNQUFILENBQVViLE9BQVYsQ0FBTjtBQUNEO0FBQ0YsQ0FYRDs7ZUFhZUgsUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZzLCB0ZW1wRGlyIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IGNvbW1hbmRzID0ge307XG5cbi8qKlxuICogU2VuZCBhIHNpbXVsYXRlZCBwdXNoIG5vdGlmaWNhdGlvblxuICpcbiAqIEBzaW5jZSBYY29kZSAxMS40IFNES1xuICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgLSBUaGUgb2JqZWN0IHRoYXQgZGVzY3JpYmVzIEFwcGxlIHB1c2ggbm90aWZpY2F0aW9uIGNvbnRlbnQuXG4gKiBJdCBtdXN0IGNvbnRhaW4gYSB0b3AtbGV2ZWwgXCJTaW11bGF0b3IgVGFyZ2V0IEJ1bmRsZVwiIGtleSB3aXRoIGEgc3RyaW5nIHZhbHVlIG1hdGNoaW5nXG4gKiB0aGUgdGFyZ2V0IGFwcGxpY2F0aW9u4oCYcyBidW5kbGUgaWRlbnRpZmllciBhbmQgXCJhcHNcIiBrZXkgd2l0aCB2YWxpZCBBcHBsZSBQdXNoIE5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gKiBGb3IgZXhhbXBsZTpcbiAqIHtcbiAqICAgXCJTaW11bGF0b3IgVGFyZ2V0IEJ1bmRsZVwiOiBcImNvbS5hcHBsZS5QcmVmZXJlbmNlc1wiLFxuICogICBcImFwc1wiOiB7XG4gKiAgICAgXCJhbGVydFwiOiBcIlRoaXMgaXMgYSBzaW11bGF0ZWQgbm90aWZpY2F0aW9uIVwiLFxuICogICAgIFwiYmFkZ2VcIjogMyxcbiAqICAgICBcInNvdW5kXCI6IFwiZGVmYXVsdFwiXG4gKiAgIH1cbiAqIH1cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgY3VycmVudCBTREsgdmVyc2lvbiBkb2VzIG5vdCBzdXBwb3J0IHRoZSBjb21tYW5kXG4gKiBvciB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgcHVzaGluZyB0aGUgbm90aWZpY2F0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGB1ZGlkYCBpbnN0YW5jZSBwcm9wZXJ0eSBpcyB1bnNldFxuICovXG5jb21tYW5kcy5wdXNoTm90aWZpY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gcHVzaE5vdGlmaWNhdGlvbiAocGF5bG9hZCkge1xuICBjb25zdCB0bXBSb290ID0gYXdhaXQgdGVtcERpci5vcGVuRGlyKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZHN0UGF0aCA9IHBhdGgucmVzb2x2ZSh0bXBSb290LCAnYXBucy5qc29uJyk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGRzdFBhdGgsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLCAndXRmOCcpO1xuICAgIGF3YWl0IHRoaXMuZXhlYygncHVzaCcsIHtcbiAgICAgIGFyZ3M6IFt0aGlzLnJlcXVpcmVVZGlkKCdwdXNoJyksIGRzdFBhdGhdLFxuICAgIH0pO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGZzLnJpbXJhZih0bXBSb290KTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwiZmlsZSI6ImxpYi9zdWJjb21tYW5kcy9wdXNoLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
